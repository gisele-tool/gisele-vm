parser:
  gvm.citrus
rules:
  gvm:
    - [ block+ ]
  block:
    - [ label, instruction+ ]
  label:
    - '::Integer'
    - '::Symbol'
  instruction:
    # generic
    - send
    - invoke
    - get
    - getr
    - set
    # control
    - nop
    - then
    - ifenil
    # lifecycle
    - puid
    - self
    - parent
    - fetch
    - pick
    - fork
    - forka
    - cont
    - end
    - schedule
    - unschedule
    - wait
    - notify
    - save
    # events
    - event
    # stack
    - pop
    - push
    - flip
    - fold
    - unfold
  # generic
  send:
    - [ 'symbol_arg?' ]
  invoke:
    - [ 'symbol_arg?' ]
  get:
    - [ 'symbol_arg?' ]
  getr:
    - [ 'symbol_arg?' ]
  set:
    - [ 'symbol_arg?' ]
  # control
  nop:
    - []
  then:
    - [ 'label_arg?' ]
  ifenil:
    - []
  # lifecycle
  puid:
    - []
  self:
    - []
  parent:
    - []
  fetch:
    - [ 'argument?' ]
  pick:
    - []
  fork:
    - [ 'label_arg?' ]
  forka:
    - [ ]
  cont:
    - [ 'label_arg?' ]
  end:
    - []
  schedule:
    - []
  unschedule:
    - []
  wait:
    - [ 'integer_arg?' ]
  notify:
    - []
  save:
    - [ 'integer_arg?' ]
  # stack
  pop:
    - [ 'integer_arg?' ]
  push:
    - [ argument ]
  flip:
    - []
  fold:
    - [ 'integer_arg?' ]
  unfold:
    - []
  # events
  event:
    - [ 'symbol_arg?' ]
  argument:
    - symbol_arg
    - integer_arg
    - string_arg
    - module_arg
    - array_arg
    - hash_arg
  label_arg:
    - symbol_arg
    - integer_arg
  symbol_arg:  '::Symbol'
  integer_arg: '::Integer'
  string_arg:  '::String'
  module_arg:  '::Module'
  array_arg:   '::Array'
  hash_arg:    '::Hash'
